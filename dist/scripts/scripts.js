function AmbassadorService(e,t,r){return{getAmbassadors:function(e){return t("campus"==e.type?r.api_url+"Ambassadors?filter[where][status]=approved&filter[where][position]=0":r.api_url+"Ambassadors?filter[where][status]=approved&filter[where][position]=1")},createAmbassador:function(){return t(r.api_url+"ambassadors")},submitCV:t(r.api_url+"ambassadors/uploadcv")}}function CategoryService(e,t,r){return{getCategories:function(){return t(r.api_url+"categories")},getCategoryById:function(e){return t(r.api_url+"categories?filter[where][name]="+e)},isCategoryExists:function(t){return access_token?e.get(r.api_url+"Categories/"+t+"/exists?access_token="+access_token):e.get(r.api_url+"Categories/"+t+"/exists")},getCategoriesCount:function(){return access_token?e.get(r.api_url+"Categories/count?access_token="):e.get(r.api_url+"Categories/count")},changeCategoryById:function(t){return e.put(r.api_url+"Categories/"+t.category_id+"?access_token="+access_token,t)},createCategory:function(t){return e.post(r.api_url+"Categories?access_token="+access_token,t)},deleteCategoryById:function(t){return e["delete"](r.api_url+"Categories/"+t+"?access_token="+access_token)}}}function TransactionService(e,t,r){return{getAllTransactions:function(){return e.get(t.api_url+"Transactions?access_token="+access_token)},getTransaction:function(e){return r(t.api_url+"Transactions/"+e.id+"?filter[include]=event&access_token="+e.access_token)},getEventDetailsByTransactionId:function(r){return e.get(t.api_url+"Transactions/"+r+"/event?access_token=")},isTransactionExists:function(r){return e.get(t.api_url+"Transactions/"+r+"/exists?access_token="+access_token)},getUserDetailsBtTransactionId:function(r){return e.get(t.api_url+"Transactions/"+r+"/user?access_token="+access_token)},getTotalTransactionCount:function(){return e.get(t.api_url+"Transactions/count?access_token="+access_token)},savePayment:function(e){return r(t.api_url+"Transactions/savepaymentid?filter[access_token]="+e)},editTransaction:function(r){return e.put(t.api_url+"Transactions/"+r.transaction_id+"?access_token="+access_token,r)},createTransaction:function(r){return e.post(t.api_url+"Transactions?access_token="+access_token,r)},deleteTransaction:function(r){return e["delete"](t.api_url+"Transactions/"+r+"?access_token="+access_token)}}}function UserService(e,t){return{createUser:function(){return e(t.api_url+"users")},getUserById:function(r){return e(t.api_url+"users/"+r.user_id+"?access_token="+r.access_token+"&filter[include]=userDetail")},getProfilePhoto:function(r,n){return e(t.api_url+"users/"+r+"?access_token="+n+"&filter[fields][profile_img_url]=true")},getTransactions:function(r){var n=t.api_url+"users/"+r.user_id+"/transactions?";return n+="filter[include]=event&access_token="+r.access_token,n+="&filter[skip]="+r.skip+"&filter[limit]="+r.limit,n+="&filter[order]=transaction_time%20DESC",e(n)},logout:function(r){return e(t.api_url+"users/logout?access_token="+r)}}}function BaseCtrl(e,t,r,n,a,o,s,i,c,l){function u(){t.isAuthenticated()&&(o.mixpanel_user.type="authenticated",o.mixpanel_user.user_id=t.getUser().userId,o.mixpanel_user.email=t.getUser().email,o.authenticated=1,g.user=t.getUser(),a.getProfilePhoto(g.user.userId,g.user.id).get().$promise.then(function(e){g.user.profile_img_url=e.profile_img_url}))}function p(e){r.hash(e),n()}function m(){s.getCategories().query().$promise.then(function(e){g.categories=e,g.categories=g.categories.sort(function(e,t){return e.event_count>t.event_count}),g.main_categories=g.categories.slice(0,g.size),g.left_categories=g.categories.slice(g.size)})}function d(t){t&&(e.next=t),l(function(){i.open({template:"views/login-options.html",controller:"LoginController as vm",scope:e})},400)}var g=this;o.openDialogBox=d,o.scrollTo=p,o.mixpanel_user={type:"anonymous"},g.getCategories=m,g.logout=t.logout,g.categories="",g.user="",o.updateLogin=u,o.authenticated=0,g.size=20,u(),m(),$(window).resize(function(){var t=parseInt(window.innerWidth);t-=857,g.size=t/89,g.size<0&&(g.size=0),e.$$phase||e.$apply(function(){g.main_categories=g.categories.slice(0,g.size),g.left_categories=g.categories.slice(g.size)})}),e.$watch("window.innerWidth",function(){var t=parseInt(window.innerWidth);t-=857,g.size=t/89,g.size<0&&(g.size=0),e.$$phase||e.$apply(function(){g.main_categories=g.categories.slice(0,g.size),g.left_categories=g.categories.slice(g.size)})})}!function(){"use strict";function e(e,t,n,a,o,s,i,c,l,u){l.debugEnabled(!0),toastr.options={positionClass:"toast-top-center"},a.apiKey("aba84f1731da7d6c92e0358da0b092c3"),e.defaults.useXDomain=!0,delete e.defaults.headers.common["X-Requested-With"],e.interceptors.push(r),o.configure({key:"AIzaSyBvEshSEx826RSLkpLBgieG2Hvaif5ryAs",v:"3",libraries:"weather,geometry,visualization"}),i.useUrlLoader("/i18n/en.json"),i.useSanitizeValueStrategy("escaped"),i.preferredLanguage("en"),s.otherwise("/"),c.strictMode(!1),u.init("825021260885774"),t.state("base",{"abstract":!0,url:"/",templateUrl:"views/base.html",controller:"BaseCtrl as vm"}).state("dashboard",{url:"",parent:"base",templateUrl:"views/dashboard.html",controller:"DashboardController as vm"}).state("merchant-pricing",{url:"merchant-pricing",parent:"base",templateUrl:"views/merchant-pricing.html"}).state("events",{url:"events/:category",parent:"base",controller:"EventListController as vm",templateUrl:"views/events/events.html"}).state("event_detail",{url:"event/details/:event_id",parent:"base",controller:"EventDetailController as vm",templateUrl:"views/events/eventView.html"}).state("signup",{url:"signup",parent:"base",controller:"SignUpController as vm",templateUrl:"views/signup.html"}).state("transaction_confirm",{url:"transaction/confirm",parent:"base",data:{login:"required"},controller:"TicketController as vm",templateUrl:"views/ticket_confirm.html"}).state("checkout",{url:"checkout",parent:"base",data:{login:"required"},templateUrl:"views/checkout.html"}).state("search",{url:"search",parent:"base",controller:"SearchController as vm",templateUrl:"views/search.html"}).state("tickets",{url:"tickets/:event_id",parent:"base",data:{login:"required"},controller:"TicketController as vm",templateUrl:"views/ticket_pop_up.html"}).state("ticket_pop",{url:"ticket_pop",parent:"base",data:{login:"required"},templateUrl:"views/ticket_confirm.html"}).state("pricing",{url:"pricing",parent:"base",controller:"MerchantController as vm",templateUrl:"views/pricing.html"}).state("mytickets",{url:"mytickets",parent:"base",data:{login:"required"},controller:"MyTicketsController as vm",templateUrl:"views/ticket.html"}).state("faq",{url:"faq",parent:"base",controller:"MerchantController as vm",templateUrl:"views/faq.html"}).state("terms",{url:"terms",parent:"base",controller:"MerchantController as vm",templateUrl:"views/terms.html"}).state("privacy",{url:"privacy",parent:"base",controller:"MerchantController as vm",templateUrl:"views/privacy.html"}).state("team-members",{url:"team-members",parent:"base",templateUrl:"views/team-members.html"}).state("media",{url:"media",parent:"base",templateUrl:"views/media.html"}).state("event-partners",{url:"event-partners",parent:"base",templateUrl:"views/event-partners.html"}).state("profile",{url:"profile",parent:"base",controller:"ProfileController as vm",templateUrl:"views/profile.html"}).state("campus",{url:"campus",parent:"base",controller:"AmbassadorViewController as vm",resolve:{TYPE:function(){return"campus"}},templateUrl:"views/campus.html"}).state("brand",{url:"brand",parent:"base",controller:"AmbassadorViewController as vm",resolve:{TYPE:function(){return"brand"}},templateUrl:"views/brand.html"}).state("ambassador-form",{url:"ambassador-form",parent:"base",controller:"CreateAmbassadorController as vm",resolve:{TYPE:function(){return"campus"}},templateUrl:"views/ambassador-form.html"}).state("form",{url:"careers",parent:"base",controller:"SubmitCVController as vm",templateUrl:"views/form.html"}).state("manager-form",{url:"manager-form",parent:"base",controller:"CreateAmbassadorController as vm",resolve:{TYPE:function(){return"brand"}},templateUrl:"views/ambassador-form.html"}).state("create-event",{url:"merchant-form",parent:"base",templateUrl:"views/merchant-form.html"})}function t(e,t,r,n,a,o,s){var i=e.$on("$stateChangeStart",function(){e.loadingProgress=!0});e.$on("$stateChangeStart",function(a,o,i,c,l){if(s.scroll(0,0),"data"in o&&"login"in o.data){var u=o.data.login;"required"!=u||t.isAuthenticated()||(a.preventDefault(),0==n.current.name.length?(toastr.error("Please Login to access the page"),e.openDialogBox?e.openDialogBox(o):n.go("dashboard")):(n.go(n.current,{},{}),toastr.error("Please Login to access the page"),e.$broadcast(r.notAuthorized),e.openDialogBox?e.openDialogBox(o):n.go("dashboard")))}});var c=e.$on("$stateChangeSuccess",function(){a(function(){e.loadingProgress=!1})});e.$on("$destroy",function(){i(),c()})}function r(e,t,r){return{responseError:function(r){return"LOGIN_FAILED_EMAIL_NOT_VERIFIED"==r.data.error.code?toastr.error("Please verify your account before logging in"):"LOGIN_FAILED"==r.data.error.code?toastr.error("Wrong Credentials"):401===r.status&&(t.logout(1),toastr.error("Session Expired. Please login again")),e.reject(r)}}}function n(){return window.encodeURIComponent}angular.module("yapp",["ui.router","ui.bootstrap","ngDialog","ngResource","pascalprecht.translate","ngMessages","facebook","directive.g+signin","analytics.mixpanel","uiGmapgoogle-maps","angularSpinner","ngFileUpload"]).config(e).run(t).factory(r).filter(n),e.$inject=["$httpProvider","$stateProvider","$locationProvider","$mixpanelProvider","uiGmapGoogleMapApiProvider","$urlRouterProvider","$translateProvider","$urlMatcherFactoryProvider","$logProvider","FacebookProvider"],t.$inject=["$rootScope","AuthService","AUTH_EVENTS","$state","$timeout","$log","$window"],r.$inject=["$q","$rootScope","$location"]}(),function(){"use strict";angular.module("yapp").constant("AppConstants",{api_url:"https://backend.partiko.com/api/"}).constant("AWS_URL","https://partiko-delhi.s3.amazonaws.com/").constant("ProfileUploadUrl","https://backend.partiko.com/api/containers/partiko-delhi/upload?type=profile").constant("ResumeUploadUrl","https://backend.partiko.com/api/containers/partiko-delhi/upload?type=resume").constant("AUTH_EVENTS",{updateUser:"update-user",notAuthorized:"auth-not-authorized"}).constant("RAZORPAY_KEY","rzp_test_cvf2AYl8HvUNOm").constant("USER_ROLES",{admin:"admin",manager:"manager",merchant:"merchant",user:"user"}).constant("OTP_KEY","VeiKKcOCT8RDsudSnaE_mk-TUu1GVWpX61nh-iNldxmB5fKCf3Ptl0clMCP8aZZoLZp4zcC7Px6b-hIsLND98w7nPMz3O4c5aPrGQnk6z3Jv0y_ni6lH7ymcN1IK-4M95muC7N7dghgRuXgd_q-OuELeCBob0YStu1mxP60tZhk=")}(),angular.module("yapp").factory("AmbassadorService",AmbassadorService),AmbassadorService.$inject=["$http","$resource","AppConstants"],angular.module("yapp").factory("CategoryService",CategoryService),CategoryService.$inject=["$http","$resource","AppConstants"],angular.module("yapp").factory("EventService",["$http","$resource","AppConstants",function(e,t,r){return{searchEvents:function(e){var n=r.api_url+"events?filter[where][or][0][event_name][regexp]="+e.data;return n+="&filter[where][or][1][event_description][regexp]="+e.data,n+="&filter[include]=eventcategory",e.price&&(n+="&filter[order]=min_price%20"+e.price),e.date&&(n+="&filter[where][start_time][between][0]="+e.date.start,n+="&filter[where][start_time][between][1]="+e.date.end),n+="&filter[limit]="+e.limit,n+="&filter[skip]="+e.skip,t(n)},getEvents:function(e){var n=r.api_url+"Events?filter[include]=eventcategory",a=0;return e.category&&(a=1,n+="&filter[where][category][regexp]="+e.category),e.date&&(n+="&filter[where][start_time][between][0]="+e.date.start,n+="&filter[where][start_time][between][1]="+e.date.end),e.price&&(n+="&filter[order]=min_price%20"+e.price),e.skip&&(n+="&filter[skip]="+e.skip),e.limit&&(n+="&filter[limit]="+e.limit),t(n)},getEventById:function(e){return t(r.api_url+"Events/"+e+"?filter[include]=tickets&filter[include]=eventcategory")},purchaseTickets:function(){return t(r.api_url+"Events/purchase?access_token=:access_token",{access_token:"@access_token"})},getUserTransactionById:function(){return t(r.api_url+"users/:id/transactions/:fk?filter[include]=eventsaccess_token=:access_token",{access_token:"@access_token",id:"@id",fk:"@fk"})},isEventExists:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/exists?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/exists")},getTagsByEventId:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/tags?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/tags")},getTagsCount:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/tags/count?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/tags/count")},getTicketDetailsByEventId:function(e){return t(r.api_url+"Events/"+e+"/tickets")},getTicketTypeCount:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/tickets/count?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/tickets/count")},getAllTransactionsByEventId:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/transactions?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/transactions")},getAllTransactionsCountByEventId:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/transactions/count?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/transactions/count")},getAllEventsCount:function(){return access_token?e.get(r.api_url+"Events/count?access_token="+access_token):e.get(r.api_url+"Events/count")},getEventOwnerByEventId:function(t){return access_token?e.get(r.api_url+"Events/"+t+"/user?access_token="+access_token):e.get(r.api_url+"Events/"+t+"/user")},getTransactionCountByMerchantId:function(t){return e.get(r.api_url+"Events/totaltransactioncount?merchant_id="+t+"&access_token="+access_token)},changeEvent:function(t){return e.put(r.api_url+"Events/"+t.event_id+"?access_token="+access_token,t)},createEvent:function(t){return e.post(r.api_url+"Events?access_token="+access_token,t)},addTicketTypeByEventId:function(t){return e.post(r.api_url+"Events/"+t.event_id+"/tickets?access_token="+access_token,t)},addTransactionByEventId:function(t){return e.post(r.api_url+"Events/"+t.event_id+"/transactions?access_token="+access_token,t)},approveEventByEventId:function(t){return e.post(r.api_url+"Events/approve?access_token="+access_token)},deleteEvent:function(t){return e["delete"](r.api_url+"Events/"+t+"?access_token"+access_token)},deleteTagsByEventId:function(t){return e["delete"](r.api_url+"Events/"+t+"/tags?access_token="+access_token)},deleteTicketTypeByEventId:function(t){return e["delete"](r.api_url+"Events/"+t+"/tickets?access_token="+access_token)},deleteTransactionByEventId:function(t){return e["delete"](r.api_url+"Events/"+t+"/transactions?access_token="+access_token)}}}]),angular.module("yapp").factory("FestService",["$http","AppConstants",function(e,t){return{getAllFests:function(){return e.get(t.api_url+"Fests?access_token="+access_token)},getFestById:function(r){return e.get(t.api_url+"Fests/"+r+"?access_token="+access_token)},isFestExists:function(r){return e.get(t.api_url+"Fests/"+r+"/exists?access_token="+access_token)},getFestsCount:function(){return e.get(t.api_url+"Fests/count?access_token="+access_token)},changeFest:function(r){return e.put(t.api_url+"Fests/"+r.fest_id+"?access_token="+access_token,r)},createFest:function(r){return e.post(t.api_url+"Fests?access_token="+access_token,r)},deleteFestById:function(r){return e["delete"](t.api_url+"Fests/"+r+"?access_token="+access_token)}}}]),function(){"use strict";function e(e,t,r){var n={};return n.getTagsById=function(e){for(var n=r.api_url+"tags?filter[where][tag_id][inq]=0",a="&filter[where][tag_id][inq]=",o=0;o<e.length;o++)n+=a+e[o];return t(n)},n}angular.module("yapp").factory("TagService",e),e.$inject=["$http","$resource","AppConstants"]}(),angular.module("yapp").factory("TransactionService",TransactionService),TransactionService.$inject=["$http","AppConstants","$resource"],angular.module("yapp").factory("UserService",UserService),UserService.$inject=["$resource","AppConstants"],function(){"use strict";function e(e,t,r,n,a,o,s,i,c,l){var u={},p="",m="",d=!1;if(window.localStorage.getItem("user_profile")){var g=JSON.parse(window.localStorage.getItem("user_profile"));d=!0;var f=g.role[0].roleId;m=1==f?c.admin:2==f?c.manager:3==f?c.merchant:c.user}return u.login=function(){return i(e.api_url+"users/login")},u.facebookLogin=function(t){return i(e.api_url+"auth/facebook/token?access_token="+t)},u.googleLogin=function(t){return i(e.api_url+"auth/google/token?access_token="+t.token)},u.logout=function(e){t.logout(u.getUser().id).save().$promise.then(function(e){d=!1}),s.authenticated=0,s.isAuthenticated=!1,e||toastr.success("Logout Successful"),r.localStorage.clear(),d=!1,s.$broadcast(l.updateUser)},s.logout=u.logout,u.getUser=function(){return JSON.parse(window.localStorage.getItem("user_profile"))},u.setUser=function(e){window.localStorage.setItem("user_profile",JSON.stringify(e)),d=!0,p=e;var t=e.role[0].roleId;m=1==t?c.admin:2==t?c.manager:3==t?c.merchant:c.user,s.role=m},u.isAuthenticated=function(){return d},u.role=function(){return m},u.isAuthorized=function(e){return angular.isArray(e)||(e=[e]),u.isAuthenticated()&&e.indexOf(m)!==-1},u}angular.module("yapp").factory("AuthService",e),e.$inject=["AppConstants","UserService","$window","$http","$location","$q","$rootScope","$resource","USER_ROLES","AUTH_EVENTS"]}(),function(){"use strict";function e(e,t,r,n){var a={};return a.sendOTP=function(e){return t.post("https://sendotp.msg91.com/api/generateOTP",e,{headers:{"Content-Type":"application/json","application-Key":r}})},a.verifyOTP=function(e){return t.post("https://sendotp.msg91.com/api/verifyOTP",e,{headers:{"Content-Type":"application/json","application-Key":r}})},a}angular.module("yapp").factory("OTPService",e),e.$inject=["AppConstants","$http","OTP_KEY","$resource"]}(),function(){"use strict";function e(e,t,r,n,a,o,s,i,c,l){function u(){r.track("Opened SignIn"),s(function(){o.open({template:"views/login2.html",className:"ngdialog-theme-default",controller:"LoginController as vm"})},400)}function p(){s(function(){o.open({template:"views/sign-signup/signup.html",className:"ngdialog-theme-default",controller:"SignUpController as vm"})},400)}function m(){t.login().save(f.loginData).$promise.then(function(e){d(e,"normal")},function e(e){e.status==-1&&toastr.error("Unable to reach the server")})}function d(a,o){var s={};s.type=o,s.user_id=a.userId,s.email=a.email,r.track("Login",s),n.$broadcast(i.updateUser),e.closeThisDialog(),localStorage.setItem("userDetails",JSON.stringify(a)),n.userDetails=JSON.parse(localStorage.getItem("userDetails")),t.setUser(a),toastr.success("Login Successful"),n.authenticated=1,n.updateLogin()}function g(){l.login(function(e){if(e&&e.authResponse&&e.authResponse.accessToken){f.facebookConnect=1;var r=e.authResponse.accessToken;t.facebookLogin(r).get().$promise.then(function(e){d(e,"facebook")})}},{scope:"email"})}var f=this;f.loginData={},f.flag=0,f.facebookLogin=g,f.openSignIn=u,f.openSignUp=p,f.submitSignInForm=m,e.$on("event:google-plus-signin-success",function(e,r){var n=new Object;n.token=r.access_token,n.refresh_token=r.refresh_token||"",t.googleLogin(n).get().$promise.then(function(e){d(e,"google")})}),e.$on("event:google-plus-signin-failure",function(e,t){1==f.flag&&toastr.error("Failed to connect with google, Please try again!")})}angular.module("yapp").controller("LoginController",e),e.$inject=["$scope","AuthService","$mixpanel","$rootScope","$location","ngDialog","$timeout","AUTH_EVENTS","USER_ROLES","Facebook"]}(),function(){"use strict";function e(e,t,r,n,a,o,s,i,c,l,u){function p(){var e=new Object;console.log(m.signupform),e.username=m.signupform.username,e.email=m.signupform.email,e.phone_number=m.signupform.phone_number,e.user_type="user",e.role="user",t.track("Opened SignUp"),n.createUser().save(e).$promise.then(null,function(t){console.log(t);var r=t.data.error.details.codes;r&&(r.username?toastr.error("Username already taken"):r.email?toastr.error("Email id already exists"):r.phone_number?toastr.error("Phone Number is already associated with other account"):(e.password=m.signupform.password,o.open({animation:!0,templateUrl:"views/phoneverification.html",controller:"OTPVerificationController as vm",size:"sm",resolve:{userData:function(){return e}}}).result.then(function(){s.path("/")})))})}var m=this;console.log("Signup Loaded"),m.signupform={},m.doSignUp=p}function t(e,t,r,n,a,o,s,i,c){function l(){i.sendOTP(g).then(function(e){console.log(e),toastr.success("OTP Sent to "+d.phone_number),d.status=0})}function u(){f.oneTimePassword=d.otp,d.status=1,i.verifyOTP(f).then(function(e){console.log(e.data.response.refreshToken),c.refresh_token=e.data.response.refreshToken,p(c)},function(e){toastr.error("Invalid OTP"),d.status=0})}function p(e){s.createUser().save(e).$promise.then(function(t){m(e)},function(e){console.log(e)})}function m(e){var r=new Object;r.username=e.username,r.password=e.password,o.login().save(r).$promise.then(function(e){t.$broadcast(n.updateUser),localStorage.setItem("userDetails",JSON.stringify(e)),t.userDetails=JSON.parse(localStorage.getItem("userDetails")),o.setUser(e),toastr.success("Login Successful"),t.authenticated=1,t.updateLogin(),a.close()})}var d=this;d.status=1,d.phone_number=c.phone_number,d.otp="",d.sendOTP=l,d.verifyOTP=u;var g=new Object;g.countryCode="91",g.mobileNumber=d.phone_number,g.getGeneratedOTP=!1;var f=new Object;f.countryCode="91",f.mobileNumber=d.phone_number,l()}angular.module("yapp").controller("SignUpController",e).controller("OTPVerificationController",t),e.$inject=["$scope","$mixpanel","AuthService","UserService","$rootScope","$uibModal","$location","ngDialog","$timeout","AUTH_EVENTS","USER_ROLES"],t.$inject=["$scope","$rootScope","$mixpanel","AUTH_EVENTS","$uibModalInstance","AuthService","UserService","OTPService","userData"]}(),angular.module("yapp").controller("BaseCtrl",BaseCtrl),BaseCtrl.$inject=["$scope","AuthService","$location","$anchorScroll","UserService","$rootScope","CategoryService","ngDialog","$log","$timeout"],function(){"use strict";function e(e,t,r,n,a,o,s){function i(t){t&&(e.next=t),s(function(){a.open({template:"views/apple.html",controller:"LoginController as vm",scope:e})},400)}function c(){r.getEvents(p).query().$promise.then(function(e){u.events=e})}function l(){n.getCategories().query().$promise.then(function(e){u.categories=e})}var u=this,p={};p.limit=6,p.skip=0,u.getEvents=c,t.openDialogBox4=i,c(),l()}angular.module("yapp").controller("DashboardController",e),e.$inject=["$scope","$rootScope","EventService","CategoryService","ngDialog","$log","$timeout"]}(),function(){"use strict";function e(e,t,r,n,a,o,s,i,c){function l(){if(d.date&&"Date"!=d.date){console.log("called filter by date");var e,t;d.filters.date={},e=new Date,e.setHours(0,0,0,0),t=new Date,t.setHours(23,59,59,999);var r=1;2==d.date&&(r=12-e.getDay(),r<1&&(r+=13)),1!=d.date&&2!=d.date||(e.setDate(e.getDate()+r),t.setDate(t.getDate()+r)),d.filters.date.start=e.getTime(),d.filters.date.end=t.getTime()}p(1)}function u(){d.price&&"price"!=d.price&&(0==d.price?d.filters.price="ASC":1==d.price&&(d.filters.price="DESC")),p(1)}function p(e){console.log(d.date),e&&1==e&&(d.events=[],d.filters.skip=0,d.flag=0),console.log("filters are ",d.filters);var t=a.getEvents(d.filters);t.query().$promise.then(function(e){0==e.length?d.flag=1:(d.events=d.events.concat(e),d.filters.skip+=e.length)})}function m(){r&&r.params&&r.params.category&&o.getCategoryById(encodeURIComponent(r.params.category)).query().$promise.then(function(e){var t=e[0],r=t.img_count,n=(new Date).getTime();if(n%=r,0!=n){var a=t.background.split("."),o=a.pop();a=a.join("."),a+=n.toString(),t.background=a+"."+o}d.category=t})}var d=this;if(d.date="Date",d.price="Price",d.filterByDate=l,d.filterByPrice=u,d.events=[],d.category={background:"/images/homeBg2.jpg",name:"All Events",caption:"All Events Are Here"},d.filters={},d.flag=0,d.filters.skip=0,d.filters.limit=12,d.getEvents=p,r&&r.params&&r.params.category){d.filters.category=encodeURIComponent(r.params.category);var g=n.mixpanel_user;g.page=r.params.category,t.track("Page Event",g)}m(),p()}angular.module("yapp").controller("EventListController",e),e.$inject=["$scope","$mixpanel","$state","$rootScope","EventService","CategoryService","ngDialog","$log","$timeout"]}();var latlng={};!function(){"use strict";function e(e,t,r,n,a,o,s,i,c,l,u,p,m){function d(){c.getEventById(f).get().$promise.then(function(t){g.event=t,e.mapOptions.center.latitude=parseInt(t.latitude),e.mapOptions.center.longitude=parseInt(t.longitude),e.mapOptions.marker.latitude=parseInt(t.latitude),e.mapOptions.marker.longitude=parseInt(t.longitude),e.mapOptions.link="https://maps.google.com/maps?daddr="+t.latitude+","+t.longitude;var n=r.mixpanel_user;n.event_name=t.event_name,n.event_id=t.event_id,a.track("View Event",n);for(var o=0;o<g.event.tickets.length;o++)g.event.tickets[o].qty=0,g.tickets[o]=g.event.tickets[o];g.data.event_id=g.event.event_id,console.log("id "+g.event.event_id)})}var g=this;g.user="",g.event={},g.tickets=[],g.data={},g.purchaseTickets=[],g.transaction_id=null;var f=encodeURIComponent(n.event_id);g.total=0,e.mapOptions={},e.mapOptions.center={},e.mapOptions.center.latitude=28.592265,e.mapOptions.center.longitude=77.245978,e.mapOptions.marker={},e.mapOptions.marker.latitude=28.592265,e.mapOptions.marker.longitude=77.245978,e.mapOptions.zoom=15,e.mapOptions.id="map",d(),e.increaseItemCount=function(e){e.tickets_total>e.tickets_sold+e.qty?(e.qty++,g.total=g.total+e.price):toastr.error("Only "+e.qty+" "+e.title+" tickets are left")},e.decreaseItemCount=function(e){e.qty>0&&(e.qty--,g.total=g.total-e.price)},e.finalTickets=function(){for(var e=0;e<g.event.tickets.length;e++)g.singleTicket={},0!=g.event.tickets[e].qty&&(g.singleTicket.ticket_id=g.event.tickets[e].ticket_id,g.singleTicket.quantity=g.event.tickets[e].qty,g.purchaseTickets.push(g.singleTicket));g.data.tickets=g.purchaseTickets},e.purchase=function(){o.isAuthenticated()?(e.finalTickets(),g.user=o.getUser(),g.data.access_token=g.user.id,g.data.user_id=g.user.userId,c.purchaseTickets().save(g.data).$promise.then(function(t){e.transaction=t,console.log("resp",e.transaction),r.transaction_id=t.result.transaction_id,i.go("transaction_confirm")},function t(t){console.log("err ",t),t.data&&t.data.error&&t.data.error.message?toastr.error(t.data.error.message):toastr.error("Sorry for inconvenience. Some problem occurred. Please try again later")})):(toastr.error("Login is required"),r.openDialogBox())}}angular.module("yapp").controller("EventDetailController",e),e.$inject=["$scope","$window","$rootScope","$stateParams","$mixpanel","AuthService","CategoryService","$state","EventService","ngDialog","$log","$timeout","$location"]}(),function(){function e(e,t,r,n,a){function o(){r.getTransactions(s.filters).query().$promise.then(function(e){s.transactions=s.transactions.concat(e),s.filters.skip=e.length})}var s=this;s.filters={},s.filters.skip=0,s.filters.limit=6,s.user=n.getUser(),s.filters.access_token=s.user.id,s.filters.user_id=s.user.userId,s.transactions=[],s.UserTransactions=o,o()}angular.module("yapp").controller("MyTicketsController",e),e.$inject=["$state","$scope","UserService","AuthService","$stateParams"]}(),function(){"use strict";function e(e,t,r,n,a,o,s,i,c,l,u,p,m){function d(){s.getTransaction(f.data).get().$promise.then(function(e){f.transaction=e,console.log("trasn is ",e),f.finalAmount=f.transaction.transaction_amount,f.options.amount=f.transaction.transaction_amount+"00",f.options.prefill.email="support@razorpay.com",console.log("response ",f.finalAmount);var t=n.mixpanel_user;t.event_id=e.event_id,t.event_name=e.event.event_name,t.trans_id=e.transaction_id,t.amount=e.transaction_amount,t.credits=e.credits_applied,t.status=e.transaction_status,t.quantity=e.quantity,r.track("Transaction",t);var a=new Razorpay(f.options);$("#rzp-button1").click(function(e){a.open(),e.preventDefault()})})}function g(e){console.log("Transactio id ",f.id),console.log("Payment Id ",e);var t={};t.transaction_id=f.id,t.payment_id=e,t.status="approved",t.access_token=o.getUser().id,s.savePayment(t.access_token).save(t).$promise.then(function(e){return c.go("mytickets"),"Success"},function(e){return toastr.error(e),"Error"})}var f=this;f.user="",f.data={},f.transaction={},f.id=n.transaction_id,f.user=o.getUser(),f.data.access_token=f.user.access_token,f.data.id=f.id,f.finalAmount="",f.options={key:t,name:"Partiko Services Pvt Ltd",description:"Purchase Description",image:"https://s3-ap-southeast-1.amazonaws.com/partiko-delhi/partiko-logo-120x120.jpg",handler:function(e){toastr.success("<span us-spinner></span> Payment Successful. Please wait while transaction is processing",{timeout:1e4,allowHtml:!0}),g(e.razorpay_payment_id).then(function(e){if("Success"==e)toastr.success("Success");else{var t="Sorry for inconvenience, Transaction was unsuccessful.";t+=" Your money will be refunded automaatically within 3-4 days",toastr.error(t)}})},prefill:{name:"Harshil Mathur",email:"harshil@razorpay.com"},notes:{address:"Hello World"},theme:{color:"#26a69a"}},d()}angular.module("yapp").controller("TicketController",e),e.$inject=["$scope","RAZORPAY_KEY","$mixpanel","$rootScope","$stateParams","AuthService","TransactionService","CategoryService","$state","EventService","ngDialog","$log","$timeout"]}(),function(){"use strict";function e(e,t,r,n,a,o){function s(){t.getTransactions(i.filters).query().$promise.then(function(e){i.transactions=e})}var i=this;i.user={},i.filters={},i.filters.skip=0,i.filters.limit=6;var c=n.getUser();i.filters.access_token=c.id,i.filters.user_id=c.userId,i.transactions=[],i.getTransactions=s,t.getUserById(i.filters).get().$promise.then(function(e){i.user=e;var t=e.userDetail;if(t&&0!=t.length&&t.favourites&&0!=t.favourites.length){console.log(t.favourites);var n=t.favourites;r.getTagsById(n).query({}).$promise.then(function(e){i.tags=e})}})}angular.module("yapp").controller("ProfileController",e),e.$inject=["$scope","UserService","TagService","AuthService","$mixpanel","$rootScope"]}(),function(){"use strict";function e(e,t,r){var n=this;n.filter={},n.filter.type=r,n.scrollTo=scrollTo,t.getAmbassadors(n.filter).query({}).$promise.then(function(e){n.ambassadors=e})}function t(e,t,r,n,a,o,s){function i(e){console.log(e),u.source=URL.createObjectUrl(e.target.files[0])}function c(){if("campus"==s?u.data.position=0:u.data.position=1,u.data.firstname)if(u.data.email)if(u.data.phone_number)if(u.data.college)if(u.data.city)if(u.file){t.upload({url:n,file:u.file}).then(function(e){toastr.options={timeOut:1e3};var t=e.data.result.files.file[0],r=a+t.name;u.data.profile_img_url=r,l(u.data)},function(e){toastr.clear(),toastr.error("Unable to upload the file. Network connection terminated. Please Try Again")}),toastr.options={progressBar:!0,timeOut:1e5},toastr.info("Please wait while image uploads")}else l(u.data);else toastr.error("City name can't be blank");else toastr.error("College name can't be blank");else toastr.error("Phone Number can't be blank");else toastr.error("Email can't be blank");else toastr.error("Firstname can't be blank")}function l(e){o.createAmbassador().save(e).$promise.then(function(e){toastr.clear(),toastr.success("Form submitted succesfuly."),e.position?r.go("brand"):r.go("campus")},function(e){toastr.clear();var t=e.data.error.details.codes;t.email?"uniqueness"==t.email?toastr.error("Form with this email already submitted"):toastr.error("Please enter a valid email address"):t.phone_number?"uniqueness"==t.phone_number?toastr.error("Form with this phone number already submitted"):toastr.error("Please enter a valid phone number"):toastr.error("Sorry! Unable to save. Please try again later.")})}var u=this;u.filter={},u.data={},u.submitForm=c,u.file={},u.filechange=i,document.querySelector("#nextbutton").addEventListener("click",function(){
document.querySelector("#nextform").style.display="block",document.querySelector("#nextbutton").style.display="none"})}angular.module("yapp").controller("AmbassadorViewController",e).controller("CreateAmbassadorController",t),e.$inject=["$scope","AmbassadorService","TYPE"],t.$inject=["$scope","Upload","$state","ProfileUploadUrl","AWS_URL","AmbassadorService","TYPE"]}(),function(){"use strict";function e(e,t,r,n,a,o,s,i){function c(e){p.plan=e;var t=1==slider?val:$("#amount").val();1==p.plan?$total=0:2==p.plan?$total=.05*t:3==p.plan?$total=.1*t:4==p.plan&&($total=.2*t),$earnings=t-$total,$("#total").val($total),$("#total-label").text($total),$("#earnings").val($earnings),$("#earnings-label").text($earnings),e>1?p.merchant.account_type=1:p.merchant.account_type=0}function l(e,t){var r=1==e?t:$("#amount").val(),n=2==e?t:$("#duration").val();1==p.plan?$total=0:2==p.plan?$total=.05*r:3==p.plan?$total=.1*r:4==p.plan&&($total=.2*r),$totals=.03*r,$earnings=r-$total,$("#amount").val(r),$("#amount-label").text(r),$("#duration").val(n),$("#duration-label").text(n),$("#total").val($total),$("#total-label").text($total),$("#totals").val($totals),$("#totals-label").text($totals),$("#earnings").val($earnings),$("#earnings-label").text($earnings),$("#slider a").html('<label><span class="glyphicon glyphicon-chevron-left"></span> '+r+' <span class="glyphicon glyphicon-chevron-right"></span></label>'),$("#slider2 a").html('<label><span class="glyphicon glyphicon-chevron-left"></span> '+n+' <span class="glyphicon glyphicon-chevron-right"></span></label>')}function u(){p.merchant.password&&p.confirmpassword&&p.merchant.password==p.confirmpassword?p.merchant.firstname?p.merchant.email?p.merchant.phone_number?n.createUser().save(p.merchant).$promise.then(function(e){toastr.success("Thanks for registering. We will contact you on your registered email id once your account is activated"),t.go("dashboard")},function(e){var t=e.data.error.details.messages;t.email?toastr.error(t.email):t.phone_number?toastr.error(t.phone_number):toastr.error("Sorry for inconvenience. Unable to create account. Please try again later")}):toastr.error("Phone Number can't be blank"):toastr.error("Email can't be blank"):toastr.error("First Name can't be blank"):toastr.error("Passwords dont match")}var p=this;p.plan=1,p.selectPlan=c,p.submitForm=u,p.merchant={},p.merchant.user_type="merchant",p.merchant.role="merchant",p.merchant.status="pending",p.confirmpassword="",$(document).ready(function(){console.log("kk"),$(".static-ul a li").on("click",function(){console.log("kkk"),$(".static-ul a li").removeClass("actively"),$(this).addClass("actively")})}),$(document).ready(function(){$("#slider").slider({animate:!0,value:1,min:0,max:1e4,step:10,slide:function(e,t){l(1,t.value)}}),$("#slider2").slider({animate:!0,value:0,min:0,max:500,step:1,slide:function(e,t){l(2,t.value)}}),$("#amount").val(0),$("#duration").val(0),$("#amount-label").text(0),$("#duration-label").text(0),l()})}angular.module("yapp").controller("MerchantController",e),e.$inject=["$scope","$state","AuthService","UserService","$rootScope","ngDialog","$log","$timeout"]}(),function(){"use strict";function e(e,t,r,n,a,o){function s(){if(l.date&&"Date"!=l.date){var e,t;l.filters.date={},e=new Date,e.setHours(0,0,0,0),t=new Date,t.setHours(23,59,59,999);var r=1;2==l.date&&(r=6-e.getDay(),r<1&&(r+=7)),1!=l.date&&2!=l.date||(e.setDate(e.getDate()+r),t.setDate(t.getDate()+r)),l.filters.date.start=e.getTime(),l.filters.date.end=t.getTime()}c(1)}function i(){l.price&&"price"!=l.price&&(0==l.price?l.filters.price="ASC":1==l.price&&(l.filters.price="DESC")),c(1)}function c(e){e&&1==e&&(l.filters.skip=0,l.events=[],l.flag=0),l.filters.data=l.data,r.searchEvents(l.filters).query({}).$promise.then(function(e){0==e.length?l.flag=1:(l.events=l.events.concat(e),l.filters.skip+=e.length)})}var l=this;l.events={},l.data="",l.flag=0,l.filters={},l.filters.limit=6,l.filters.skip=0,l.searchEvents=c,l.date="Date",l.price="Price",l.filterByDate=s,l.filterByPrice=i}angular.module("yapp").controller("SearchController",e),e.$inject=["$scope","$mixpanel","EventService","$rootScope","$location","ngDialog"]}(),function(){"use strict";function e(e,t,r,n,a,o,s){function i(){c.data.interested=[];for(var t=0;t<c.careers.length;t++)1==c.careers[t][1]&&c.data.interested.push(c.careers[t][0]);if(c.data.firstname&&" "!=c.data.firstname)if(c.data.email&&" "!=c.data.email)if(c.data.interested&&0!=c.data.interested.length)if(c.data.job_type&&" "!=c.data.job_type)if(c.file){r.upload({url:n,file:c.file}).then(function(t){toastr.options={timeOut:1e3},toastr.clear();var r=t.data.result.files.file[0],n=o+r.name;c.data.resume_url=n;var a={};a.data=c.data,s.submitCV.save(a).$promise.then(function(t){toastr.success("Resume submitted Successfuly."),e.path("/")})},function(e){toastr.clear(),toastr.error("Unable to upload the file. Network connection terminated. Please Try Again")}),toastr.options={progressBar:!0,timeOut:1e5},toastr.info("Please wait while image uploads")}else toastr.error("Please provide a resume.");else toastr.error("Please select one from Full Time/Internship");else toastr.error("Please select atleast one interest");else toastr.error("Email id is required");else toastr.error("Please mention your name")}var c=this;c.data={},c.data.interested=[],c.interests=[],c.careers=[["Backend Developer(Node.js/Loopback)",!1],["Frontend Developer(Angular.js)",!1],["Frontend Designer(HTML/CSS/Bootstrap)",!1],["Android Developer",!1],["iOS Developer",!1],["Business Developer",!1],["Marketing",!1],["Content Writer",!1]],c.job_type=["Full Time","Internship"],c.submitForm=i}angular.module("yapp").controller("SubmitCVController",e),e.$inject=["$location","$scope","Upload","ResumeUploadUrl","$state","AWS_URL","AmbassadorService"]}();